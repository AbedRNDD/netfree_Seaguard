<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.WebView?>

<AnchorPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.netfreeseaguard.DashboardController"
            prefWidth="360.0" prefHeight="720.0"
            stylesheets="@app.css">

    <children>

        <!-- HEADER (fixed) -->
        <BorderPane AnchorPane.topAnchor="0.0"
                    AnchorPane.leftAnchor="0.0"
                    AnchorPane.rightAnchor="0.0"
                    prefHeight="64.0"
                    styleClass="dashboard-header">
            <padding>
                <Insets top="6" bottom="6" left="12" right="12"/>
            </padding>

            <left>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <StackPane prefWidth="40" prefHeight="40"
                               styleClass="header-logo-circle">
                        <Label text="14"
                               style="-fx-text-fill: #0369a1;
                                      -fx-font-size: 16;
                                      -fx-font-weight: bold;"/>
                    </StackPane>

                    <VBox spacing="2">
                        <Label text="Ghost Net Tracker"
                               styleClass="header-title"/>
                        <Label text="Track Ghost Nets"
                               styleClass="header-subtitle"/>
                    </VBox>
                </HBox>
            </left>

            <right>
                <Button onAction="#onMenuClick"
                        styleClass="header-menu-btn">
                    <text>‚â°</text>
                </Button>
            </right>
        </BorderPane>

        <!-- MAP AREA between header and bottom nav -->
        <StackPane fx:id="mapContainer"
                   AnchorPane.topAnchor="64.0"
                   AnchorPane.leftAnchor="0.0"
                   AnchorPane.rightAnchor="0.0"
                   AnchorPane.bottomAnchor="120.0"
                   styleClass="map-background">
            <children>
                <StackPane alignment="CENTER"
                           styleClass="map-card">
                    <WebView fx:id="mapWebView"
                             prefWidth="340.0"
                             prefHeight="520.0"
                             styleClass="map-webview"/>
                </StackPane>
            </children>
        </StackPane>

        <!-- VIEW TOGGLE sits on top of map -->
        <HBox layoutX="16.0" layoutY="72.0"
              spacing="0"
              styleClass="view-toggle-container">
            <padding>
                <Insets top="2" bottom="2" left="2" right="2"/>
            </padding>

            <ToggleButton fx:id="mijnTrackersToggle"
                          text="Mijn trackers"
                          onAction="#onViewModeOwn"
                          styleClass="view-toggle-btn"/>

            <ToggleButton fx:id="wereldKaartToggle"
                          text="üåç Wereldkaart"
                          onAction="#onViewModeGlobal"
                          styleClass="view-toggle-btn"/>
        </HBox>

        <!-- DETAIL PANEL -->
        <VBox fx:id="detailPanel"
              visible="false" managed="false"
              prefWidth="260.0"
              AnchorPane.topAnchor="88.0"
              AnchorPane.rightAnchor="16.0"
              spacing="8"
              styleClass="detail-panel">

            <HBox spacing="8">
                <Label text="üï∏" style="-fx-font-size: 14;"/>
                <Label text="Ghost Net" styleClass="detail-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="‚úï"
                        onAction="#onClosePanel"
                        style="-fx-background-color: transparent;
                               -fx-text-fill: #64748b;
                               -fx-padding: 0 4 0 4;"/>
            </HBox>

            <Label fx:id="detailInfoLabel"
                   wrapText="true"
                   styleClass="detail-text"/>

            <VBox spacing="4">
                <Label text="Location" styleClass="detail-label"/>
                <Label fx:id="detailLocationLabel"
                       wrapText="true"
                       styleClass="detail-text"/>
            </VBox>
        </VBox>

        <!-- STATS CARD just above bottom nav -->
        <HBox AnchorPane.leftAnchor="16.0"
              AnchorPane.rightAnchor="16.0"
              AnchorPane.bottomAnchor="72.0"
              alignment="CENTER"
              styleClass="stats-card">

            <VBox alignment="CENTER" spacing="2">
                <Label fx:id="totalLabel"
                       text="0"
                       styleClass="stats-number-main stats-number-total"/>
                <Label fx:id="totalLabelCaption"
                       text="Mijn Nets"
                       styleClass="stats-label"/>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <VBox alignment="CENTER" spacing="2">
                <Label fx:id="activeLabel"
                       text="0"
                       styleClass="stats-number-main stats-number-active"/>
                <Label text="Actief" styleClass="stats-label"/>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <VBox alignment="CENTER" spacing="2">
                <Label fx:id="monthLabel"
                       text="0"
                       styleClass="stats-number-main stats-number-month"/>
                <Label text="Deze Maand" styleClass="stats-label"/>
            </VBox>
        </HBox>

        <!-- ZOOM BUTTONS floating on map -->
        <VBox spacing="8"
              AnchorPane.rightAnchor="16.0"
              AnchorPane.bottomAnchor="180.0">
            <Button text="+" onAction="#onZoomIn"
                    prefWidth="40" prefHeight="40"
                    style="-fx-border-width: 0; -fx-background-insets: 0;"
                    styleClass="zoom-btn"/>

            <Button text="-" onAction="#onZoomOut"
                    prefWidth="40" prefHeight="40"
                    style="-fx-border-width: 0; -fx-background-insets: 0;"
                    styleClass="zoom-btn"/>
        </VBox>

        <!-- FLOATING REPORT BUTTON -->
        <Button fx:id="reportButton"
                text="+"
                onAction="#onNavReport"
                prefWidth="56" prefHeight="56"
                AnchorPane.rightAnchor="88.0"
                AnchorPane.bottomAnchor="180.0"
                styleClass="floating-report-btn"/>

        <!-- BOTTOM NAV (fixed) -->
        <HBox AnchorPane.leftAnchor="0.0"
              AnchorPane.rightAnchor="0.0"
              AnchorPane.bottomAnchor="0.0"
              spacing="0"
              alignment="CENTER"
              style="-fx-background-color: white;
                     -fx-border-color: rgba(6,182,212,0.2);
                     -fx-border-width: 1 0 0 0;
                     -fx-effect: dropshadow(gaussian, rgba(15,23,42,0.12), 10, 0, 0, -2);
                     -fx-padding: 4 12 4 12;">

            <!-- Home -->
            <VBox alignment="CENTER" spacing="2">
                <Button onAction="#onNavHome"
                        style="-fx-background-color: transparent;
                               -fx-text-fill: #0369a1;
                               -fx-font-size: 18;
                               -fx-padding: 2 6 2 6;">
                    <text>üè†</text>
                </Button>
                <Label text="Kaart"
                       style="-fx-text-fill: #0369a1;
                              -fx-font-size: 10;
                              -fx-font-weight: bold;"/>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Report -->
            <VBox alignment="CENTER" spacing="2">
                <Button onAction="#onNavReport"
                        style="-fx-background-color: transparent;
                               -fx-text-fill: #64748b;
                               -fx-font-size: 18;
                               -fx-padding: 2 6 2 6;">
                    <text>üìù</text>
                </Button>
                <Label text="Melden"
                       style="-fx-text-fill: #64748b;
                              -fx-font-size: 10;"/>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Alerts -->
            <VBox alignment="CENTER" spacing="2">
                <Button onAction="#onNavAlerts"
                        style="-fx-background-color: transparent;
                               -fx-text-fill: #64748b;
                               -fx-font-size: 18;
                               -fx-padding: 2 6 2 6;">
                    <text>üîî</text>
                </Button>
                <Label text="Alerts"
                       style="-fx-text-fill: #64748b;
                              -fx-font-size: 10;"/>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Stats / Beheer -->
            <VBox alignment="CENTER" spacing="2">
                <Button fx:id="statsNavButton"
                        onAction="#onNavStats"
                        style="-fx-background-color: transparent;
                               -fx-text-fill: #64748b;
                               -fx-font-size: 18;
                               -fx-padding: 2 6 2 6;">
                    <text>üìä</text>
                </Button>
                <Label fx:id="statsNavLabel"
                       text="Stats"
                       style="-fx-text-fill: #64748b;
                              -fx-font-size: 10;"/>
            </VBox>
        </HBox>

    </children>
</AnchorPane>
